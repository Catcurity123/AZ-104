#### A. Implementation
(+) We need to specify 3 components:
	`1.` `Security Principal`: Who/what is being assigned access
	`2.` `Role Definition`: What are the permissions
	`3.` `Scope`: Where will the permissions apply

(+) The combination of these components are called `RBAC Assignment`. RBAC is then a tie of user `identity` being assigned a `permission` to a specific `scope`.
(+) We assign the permission at the scope that we permission to have access in, for example if we want scope at VM, we create the permission at the resource group, or the resource itself.
![[Pasted image 20251226104958.png]]

###### 1. Security Principal
(+) This component supports `user, security group, app identity, managed identity`
![[Pasted image 20251226105114.png]]

###### 2. Role Definition
(+) The permissions being granted, as defined by `built-in` or `custom` roles
![[Pasted image 20251226105308.png]]

(+) The assigned role only talks about the permission to work with `control plane` meaning changing the configuration of an item. It does not automatically give you the permission to access `data plane` meaning the access to the actual data.
	`Owner`: Read, write, and permission configuration of all resources
	`Contributer`: Read, write for the assigned resource only
	`Reader`: Read for assigned resource only.

(+) The access to `data plane` is given through a different `data role`.

###### 3. Scope
(+) Management Group, Subscription, Resource Group, or Resource, we can further limit the access of identity to a specific scope.

![[Pasted image 20251226105830.png]]

#### B. Entra ID Roles
(+) Permissions that are specific to Entra ID, role that grants permission for user administration or device administration, group administration. We assign Entra ID role at Entra ID
![[Pasted image 20251226111239.png]]

(+) The implementation is similar with normal roles assignment, the only different is `scope`. Where we will scope it to `tenant`, `administrative unit`, `application`, these are specific to EntraID

#### C. Custom Roles
(+) When we need a role that is not `built-in` for Azure.
![[Pasted image 20251226132223.png]]

###### Role Definition
![[Pasted image 20251226132339.png]]

###### 1. Metadata:
(+) `Name`: name of the custom role
(+) `Description`: description of the custom role.

###### 2. Permission:
(+) `Action`: Allowed control plane actions
(+) `NotActions`: **Subtracted** control plan actions
(+) `DataAction`: Allowed data plane actions
(+) `NotDataAction`: Subtracted data plan actions

###### 3. Scope:
(+) `AssignableScopes`: define the scope for one or more resource groups, we can scope it at
	`1. /*`: meaning root, so it is available to all scopes, but this is only assignable using built-in roles
	`2. /providers/Microsoft.Management/managementGroups/ID`: a management group
	`3. /subscriptions/ID`: one or more subscriptions
	`4. /subscriptions/ID/resourcegroups/name`: one or more resource group

###### NOTE
(+) Azure RBAC custom roles are available without any special licensing requirement
(+) Azure RBAC is not Azure Policy, RBAC is for permission (control plane action, data plane action), Policy is for Standard (size of VM, budget, location)
(+) To configure Azure RBAC custom role, you need `Owner` or `User Access Admin` permission

#### D. Entra ID Custom Roles
(+) It will be the same as RBAC custom roles, but the scopes will be Entra ID's specific.
![[Pasted image 20251226134556.png]]

###### NOTE
(+) `Global administrator` role is Entra ID role that can manage all objects within Entra ID. Except for entities 

#### E. Case Study
![[Pasted image 20251226134944.png]]

###### Current State
![[Pasted image 20251226135037.png]]

![[Pasted image 20251226135127.png]]

![[Pasted image 20251226135201.png]]

###### Requirement
 ![[Pasted image 20251226140030.png]]

###### Question
![[Pasted image 20251226140132.png]]

###### Solution
![[Pasted image 20251226140357.png]]
![[Pasted image 20251226141103.png]]

